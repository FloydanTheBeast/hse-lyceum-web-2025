---
theme: default
title: "Введение в React. Сборщики / Курс по веб-разработке, 10 класс"
class: text-center
drawings:
  persist: false
transition: slide-left
mdc: true
fonts:
  sans: Montserrat
hideInToc: true
browserExporter: true
---

# Курс по веб-разработке

<h2 class="color-gray-400 fw-200">Введение в React. Сборщики</h2>

---

# Внешние зависимости

> Чтобы каждый раз не переизобретать велосипед и не писать всё с нуля, можно пользоваться кодом, написанным другими людьми. Использование такого кода во внешнем источнике называется **внешней зависимостью** - это сторонние библиотеки и фреймворки, которые добавляют готовый функционал и ускоряют разработку

Один из способов подключения внешних зависимостей - использование **CDN**

> **CDN (Content Delivery Network)** - это попросту большая сеть серверов, которая позволяет быстро доставляет файлы библиотек пользователю, например:
> - [jsDelivr](https://cdn.jsdelivr.net)
> - [UNPKG](https://unpkg.com/)

### Примеры подключения

```html
<!-- Подключение js-библиотеки (lodash) из CDN -->
<script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>

<!-- Подключение css-стилей (bootstrap) из CDN -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap/dist/css/bootstrap.min.css">
```

---

# NPM

> **[NPM (Node Package Manager)](https://www.npmjs.com/)** — это реестр зависимостей и по совместительству менеджер пакетов для JavaScript

> **Реестры зависимостей** — это централизованные каталоги, в которых хранятся JavaScript-библиотеки и пакеты. Они позволяют разработчикам искать, скачивать и публиковать собственные модули

> **Менеджер пакетов** - специальная программа, позволяющая скачивать, обновлять и управлять библиотеками и инструментами, используемыми в разработке

NPM автоматически устанавливается вместе с **[node.js](https://nodejs.org/en)** - специальной небраузерной средой исполнения JS

---

# NPM

Основы работы

> После установки node.js, `npm` станет доступен в качестве инструмента командной строки (**CLI, Command Line Interface**) 

### Основные команды

- `npm init` - инициализирует проект и создаст специальный файл `package.json`, предварительно задав несколько вопросов о проекте (их можно пропустить при помощи флага `-y`)
- `npm install <название-зависимости>` - установит зависимость
- `npm install -g <название-зависимости>` - установит зависимость глобально, т.е. она станет доступна на вашем компьютере в качестве набора утилит
- `npm uninstall <название-зависимости>` - удалит зависимость
- `npm run <название-скрипта>` - запустит скрипт, описанный в файле `package.json`

> Файлы зависимостей при установке будут сохранён в директорию `node_modules` вашего проекта

---

<style scoped>
  div {
    --slidev-code-font-size: 8px;
    --slidev-code-line-height: 10px;
  }
</style>

# NPM

`package.json`

```json
{
  "name": "my-project",               // Имя проекта (пакета)
  "version": "1.0.0",                 // Версия проекта по SemVer
  "description": "Demo project",      // Короткое описание
  "main": "index.js",                 // Главный входной файл приложения/библиотеки
  "scripts": {                        // Скрипты, которые можно запускать через "npm run <название-скрипта>"
    "start": "node index.js",         // npm run start — запуск приложения
    "build": "webpack build",         // npm run build — сборка проекта
    "test": "jest"                    // npm run test — запуск тестов
  },
  "keywords": [                       // Ключевые слова (для поиска в реестре)
    "demo",
    "example"
  ],
  "author": "Иван И",                 // Автор проекта
  "license": "MIT",                   // Тип лицензии
  "dependencies": {                   // Продакшн-зависимости — нужны для работы приложения
    "lodash": "^4.17.21"
  },
  "devDependencies": {                // Dev-зависимости - нужны только для разработки
    "eslint": "8.57.0",
    "webpack": "~5.88.2"
  },
  "engines": {                        // Версии Node/NPM, с которыми совместим проект
    "node": ">=18",
    "npm": ">=9"
  },
  "packageManager": "npm@10.9.0",     // Информация об используемом пакетном менеджере
  "repository": {                     // Информация о репозитории проекта
    "type": "git",
    "url": "https://github.com/user/my-project.git"
  }
}

```

---
transition: none
---

# NPM

Версионирование зависимостей

Файл `package.json` содержит список всех зависимостей, необходимых для работы вашего проекта:
- `dependencies` - содержит всё, что необходимо непосрдественно для работы вашей программы
- `devDependencies` - содержит только зависимости, необходимые для разработки (инструменты для тестирования, статического анализа кода, сборки проекта и т.п.). 

Помимо названия зависимость имеет ещё и **версию**, описанную при помощи **[семантического версионирования (SemVer)](https://semver.org/lang/ru/)**

<img src="https://go.dev/doc/modules/images/version-number.png" class="dark:filter-invert-[1] mx-auto w-100" />

---
class: table-dense
---

<style scoped>
  td {
    font-size: 12px;
  }
</style>

# NPM

Версионирование зависимостей - спец. символы

| Символ | Пример        | Значение / Поведение                                                                 |
|--------|---------------|------------------------------------------------------------------------------------|
| `^`    | `^1.4.2`      | Позволяет обновлять **minor** и **patch**, не меняя **major** (1.4.2 → 1.5.0)      |
| `~`    | `~1.4.2`      | Позволяет обновлять только **patch**, не меняя **minor** и **major** (1.4.2 → 1.4.5)|
| `=`    | `=1.4.2`      | Фиксированная версия, устанавливается строго указанная (1.4.2)                      |
| `>`    | `>1.4.2`      | Любая версия больше указанной (1.4.3, 1.5.0 и т.д.)                                 |
| `<`    | `<2.0.0`      | Любая версия меньше указанной                                                     |
| `>=`   | `>=1.4.2`     | Версия не меньше указанной                                                         |
| `<=`   | `<=1.4.2`     | Версия не больше указанной                                                         |
| `*`    | `*`           | Любая версия                                                                       |
| `x`    | `1.4.x`       | Любая версия patch для указанного major.minor (1.4.0 → 1.4.9)                     |
| `-`    | `1.4.2 - 1.5.0` | Диапазон версий, включая обе границы (1.4.2, 1.4.3 … 1.5.0)                       |
| `\|\|`   | `1.4.2 \|\| 1.5.0` | Любая из указанных версий                                                        |
| `latest` | `latest`     | Устанавливает самую последнюю версию пакета                                       |
| `beta/alpha` | `1.4.2-beta.1` | Предрелизная версия (не считается стабильной)                                 |


---

# NPM

Lock-файл

Помимо версий, описанных в `package.json`, ваш проект будет содержать lock-файл - `package-lock.json`, он:
- Фиксирует точные версии всех зависимостей и подзависимостей
- Обеспечивает идентичные установки пакетов на любых машинах
- Делает сборку воспроизводимой на других устройствах

<br />

> Lock-файл обязательно должен быть в репозитории — это часть гарантии стабильности проекта

---
class: table-dense
---

# Аналоги NPM

| Пакетный менеджер | Описание | Особенности | Lock-файл |
|-------------------|----------|-------------|-----------|
| npm               | Стандартный менеджер пакетов для Node.js | Большая экосистема, простой интерфейс | `package-lock.json` |
| **[Yarn Classic](https://classic.yarnpkg.com/en/docs/install)**      | Альтернативный быстрый менеджер | Кэширование, удобные команды | `yarn.lock` |
| Yarn Berry (Yarn 2+) | Полностью переработанная версия Yarn | Plug'n'Play, отсутствие `node_modules`, высокая производительность | `yarn.lock` |
| pnpm              | Менеджер с жёсткими симлинками | Экономит место, ускоряет установку, безопасные зависимости | `pnpm-lock.yaml` |
| Bun (bun pm)      | Менеджер для Bun | Высокая скорость, встроена в Bun | `bun.lockb` |

<br/>

> Рекомендую использовать `yarn` 1-ой версии, он значительно быстрее `npm` и аналогичен по функциональности

---

# NPX

> `npx` — это инструмент, который идёт вместе с npm (начиная с версии 5.2) и позволяет запускать пакеты Node.js без их глобальной установки

- `npx create-react-app my-app` - одноразовый запуск CLI-пакета без установки
- `npx webpack@5 --version` - запуск конкретной вер
- `npx eslint src/` - запуск пакета, установленного в проекте, но не глобально

### Преимещества

- Нет необходимости устанавливать зависимости глобально и тратить место на компьютере
- Всегда можно использовать свежую версию пакета
- Работает с локальными и глобальными пакетами

---
src: ./_shared.md#5
class: table-dense
---

---

# Webpack

```js
const webpack = require('webpack');
const HtmlWebpackPlugin = require('html-webpack-plugin');
const path = require('path');

module.exports = (_, argv) => ({
  mode: argv.mode, // Режим для сборки, либо 'production', либо 'development'
  entry: './src/index.js', // Точка входа
  output: {
    filename: 'bundle.js', // Итоговый файл
    path: path.resolve(__dirname, 'dist'),
  },
  module: {
    rules: [
      { test: /\.css$/, use: ['style-loader', 'css-loader'] }, // Обработка CSS
    ],
  },
  plugins: [
    new HtmlWebpackPlugin(), // Плагин для автоматического создания HTML и подключения туда JS-бандла
    new webpack.HotModuleReplacementPlugin()
  ],
});
```

<figcaption><code>webpack.config.js</code></figcaption>

---

# Vite

> **Vite** - быстрый и очень лёгкий в конфигурации сборщик, популярная замена для webpack

<br/>

```sh
npm create vite my-app # Создание проекта из шаблона
# или
yarn create vite my-app

cd my-app

npm run dev      # Запуск dev-сервера
npm run build    # Сборка проекта для продакшна
# или
yarn dev
yarn build
```

---
layout: two-cols
---

<style scoped>
  li, p:not(h1 + p) {
    font-size: 11px;
    line-height: 1rem;
  }
  
  p:not(h1 + p) {
    margin: 4px 0;
  }

  blockquote {
    margin-bottom: 4px;
    font-size: 12px;
  }
</style>

# Практика

<div></div>

> Напишите приложение, отображающее статистику репозиториев в GitHub

- В `<textarea>` вводится список репозиториев в формате <имя-владельца>/<название-репозитория>
- При нажатии на кнопку "Собрать статистику" происходят запросы на [конечную точку для получения информации о репозитории](https://docs.github.com/en/rest/repos/repos?apiVersion=2022-11-28#get-a-repository) (репозитории можете взять, например, из )
- После загрузки появляются:
  - Список карточек с краткой информацией о каждом репозитории
  - Набор графиков с общей статистикой:
    - Линейный/столбчатый график с количеством звёзд
    - Круговая диаграмма с размерами репозиториев

**Дополнительные требования:**
- Валидация формата ввода при помощи регулярных выражений
- Отображение серверных ошибок
- Отображение состояния загрузки
- Сортировка репозиториев по количеству звёзд
- Навести марафет при помощи [Bootstrap](https://www.npmjs.com/package/bootstrap), [Tailwind](https://www.npmjs.com/package/tailwindcss) и проч., **а ещё лучше без стороннего инструмента**

<b>Необходимо использовать следующие инструменты:</b>
- Пакетный менеджер (npm, yarn или любой другой)
- Сборщик (например, [Vite](https://www.npmjs.com/package/vite)) - `yarn create vite`
- [Axios](https://www.npmjs.com/package/axios) для сетевых запросов
- [Chart.js](https://www.npmjs.com/package/chart.js/v/2.7.3), [ApexCharts](https://www.npmjs.com/package/apexcharts) или подобный для отображения графиков
- (Опционально) [Lodash](https://www.npmjs.com/package/lodash) для сортировки данных


::right::

<img src="/gh-stats.png" class="ml-6 mt-20%" />

---

# Дополнительные материалы

- [GitVerse - Что такое версионирование пакетов](https://gitverse.ru/blog/articles/development/803-nastrojka-seti-v-virtualbox)
- [Habr - Webpack: руководство для начинающих](https://habr.com/ru/articles/514838/)